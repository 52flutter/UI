{"version":3,"sources":["../../src/components/TableDrag/index.js"],"names":["RangePicker","Date","prototype","format","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","S","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","length","k","mousePositionLeft","de","deLeft","maxColumn","minColumn","limitRight","limitLeft","cur","document","body","style","cursor","overflowX","ic","lc","overlay","startColumn","endColumn","deWidth","TableDragComponent","componentWillMount","filter","initialFilter","props","table","order","buttonGroup","setFilterValues","setState","addId","id","checkbox","rowSelection","searchShow","searchValue","filerModalShow","setting","moreButtonStatus","hasSearch","componentDidMount","state","tableContainer","refs","querySelector","setAttribute","componentWillReceiveProps","nextProps","tableFilter","filterOption","moreButton","show","dataSource","componentWillUpdate","nextState","changeColumn","start","end","del","splice","changeTitleOrder","componentWillUnmount","eventPageX","event","pageX","docElem","documentElement","clientX","scrollLeft","clientLeft","tridentDetection","navigator","userAgent","indexOf","borderCollapseDetection","elementStyleProperty","getOffsetRect","elem","box","getBoundingClientRect","scrollTop","window","pageYOffset","pageXOffset","clientTop","top","left","round","numericProperty","prop","parseInt","eventTargetTh","e","type","Object","toString","call","target","srcElement","parentElement","element","getComputedStyle","getPropertyValue","re","arguments","toUpperCase","currentStyle","copyStyles","el","cs","css","i","mousePrepareDrag","trident","getElementById","borderCollapse","tablePosition","row","rows","rowPosition","rowOffsetHeight","offsetHeight","tableClientLeft","tableClientTop","backLeft","backTop","backWidth","offsetWidth","backHeight","zIndex","initialColumn","cellIndex","backgroundColor","hr","nc","cells","back","createElement","position","width","height","className","tableLeft","tableParent","tableParentLeft","tableParentWidth","slice","tableLimitLeft","tableLimitRight","cell","cellPosition","clientWidth","clientHeight","clientRight","clientBottom","paddingTop","paddingBottom","temp","computedCellHeight","bottom","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","elementBaseLeft","elementBaseTop","elementBaseWidth","elementBaseHeight","cssText","innerHTML","getAttribute","elementBase","appendChild","elementBaseLimitRight","opacity","getEvent","eventWhich","which","button","addEvent","obj","fn","attachEvent","addEventListener","removeEvent","detachEvent","removeEventListener","getTableColumn","defaultColumn","tx","sign","x","NaN","mouseMoveDelegate","distance","lastColumn","eventColumn","borderSpacing","direction","shift","layerOne","childNodes","layerTwo","mouseUpDelegate","removeChild","titleMouseDown","preventDefault","returnValue","stopPropagation","cancelBubble","getColumns","columns","newColumn","that","map","val","key","newVal","push","searchClick","assign","searchName","triggerSearchFilter","searchChange","value","filterClick","filterResetClick","search","setDateFilter","name","option","index","property","options","filterCheckbox","checked","filterArray","stringArray","reset","newFilter","filterSelect","filterDateChange","date","dateString","filterRangeInput","arr","isInteger","num","queryFilter","getFilterList","stringDom","enumDom","dateDom","rangeDom","label","select","placeholder","rangePlaceholder","stringFilterTitle","filterQuery","typeFilterTitle","filterEmptyContent","downloadClick","notDownloadColumns","data","title","result","subTitle","content","textContent","unshift","csvContent","msSaveOrOpenBlob","forEach","infoArray","dataString","join","blob","Blob","decodeURIComponent","encodeURI","msSaveBlob","downloadFileName","encodedUri","link","click","sortFilterValues","range","filterValues","syncClick","moreButtonClick","moreClick","deleteClick","settingClick","changeSettingModal","bool","settingSave","selectedItems","settingResultFilter","string","empty","getSelectedItems","selected","getInputStatus","getInputPlaceholder","pageSizeChange","render","moreShow","total","dynamicButton","dynamicButtonChildren","children","Array","isArray","display","add","addClick","addTitle","delete","selectedRowKeys","deleteTitle","edit","editClick","editTitle","searchPlaceholder","searchTitle","filterTitle","resetTitle","sync","syncTitle","settingTitle","download","downloadTitle","pageSize","pageSizeList","pageSizeContent","settingOkText","settingCancelText","settingModalTitle","settingItemSelectedContent","settingPlaceholder","settingAddAllItemTitle","settingAddSelectedItemTitle","settingRemoveAllItemTitle","settingRemoveSelectedItemTitle","settingSavePrompt","Component","defaultProps","pagination","propTypes","shape","isRequired","array","func","number"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport {Table,Icon,Button,Input,Checkbox,Select,DatePicker  } from \"antd\";\nconst { RangePicker } = DatePicker;\nimport ItemSelectModal from \"../ItemSelectModal/index\";\n// import TableDrag from \"./table-drag\";\nimport PropTypes from 'prop-types';\nif(!Date.prototype.format){\n  Date.prototype.format = function (format) {\n    const o = {\n      'M+': this.getMonth() + 1,\n      'd+': this.getDate(),\n      'h+': this.getHours(),\n      'H+': this.getHours(),\n      'm+': this.getMinutes(),\n      's+': this.getSeconds(),\n      'q+': Math.floor((this.getMonth() + 3) / 3),\n      S: this.getMilliseconds(),\n    }\n    if (/(y+)/.test(format)) {\n      format = format.replace(RegExp.$1, `${this.getFullYear()}`.substr(4 - RegExp.$1.length))\n    }\n    for (let k in o) {\n      if (new RegExp(`(${k})`).test(format)) {\n        format = format.replace(RegExp.$1, RegExp.$1.length === 1 ? o[k] : (`00${o[k]}`).substr(`${o[k]}`.length))\n      }\n    }\n    return format\n  }\n}\n\nlet mousePositionLeft=0;\nlet de=null;\nlet deLeft=0;\nlet maxColumn=0;\nlet minColumn=0;\nlet limitRight=0;\nlet limitLeft=0;\nlet cur=document.body.style.cursor;\nlet overflowX=document.body.style.overflowX;//表格拖拽出现问题，造成视觉上表格移动，看如何设置可避免\nlet ic=0;\nlet lc=0;\nlet overlay=null;\nlet startColumn=0;\nlet endColumn=0;\nlet deWidth=0;\nexport class TableDragComponent extends React.Component {\n  componentWillMount=()=>{\n    let filter=this.initialFilter(this.props.table.order);\n    this.props.buttonGroup.setFilterValues(filter);\n    this.setState({\n      addId:false,//是否已经给脱拽的table添加id\n      id:this.props.table.id,//给拖拽的table添加的id\n      checkbox:!!this.props.table.rowSelection,//判断table是否有checkbox\n      order:this.props.table.order,//table的title顺序\n      searchShow:true,//设置是否显示搜索框\n      searchValue:\"\",//搜索框的值\n      filerModalShow:false,//filter模态框是否显示\n      filter:filter,//搜索数据汇总\n      setting:false,//设置模态框是否可用\n      moreButtonStatus:false,//为了以免响应数据慢，出现多次点击按钮，出现重复id,\n      hasSearch:true,//为了解决用户在点击筛选条件后，未点击查询而直接点击下一页和页码的问题\n    });\n  }\n  componentDidMount=()=>{\n    if(!this.state.addId){//给table添加id\n      let tableContainer=this.refs.tableContainer;\n      let table=tableContainer.querySelector(\"table\");\n      table.setAttribute(\"id\",this.state.id);\n      this.setState({addId:true});\n    }\n  }\n  componentWillReceiveProps=(nextProps)=>{\n    if(this.props.table.order.length===0&&nextProps.table.order.length!==0){\n      this.setState({order:nextProps.table.order});\n      let filter=this.initialFilter(nextProps.table.order);\n      this.setState({filter:filter});\n      this.props.buttonGroup.setFilterValues(filter);\n    }\n    if(this.props.tableFilter.filterOption.length===0&&nextProps.tableFilter.filterOption.length!==0){\n      let filter=this.initialFilter(nextProps.table.order,nextProps.tableFilter.filterOption);\n      this.setState({filter:filter});\n      this.props.buttonGroup.setFilterValues(filter);\n    }\n    if(this.props.moreButton.show&&this.props.table.dataSource!==nextProps.table.dataSource){\n      this.setState({moreButtonStatus:false});\n    }\n  }\n  componentWillUpdate=(nextProps,nextState)=>{\n    // if(this.state.addId!==nextState.addId){//实例化一个可拖拽table的对象\n    //   new TableDrag(document.getElementById(this.state.id), { distance: true, restoreState: false ,changeColumn:this.changeColumn});\n    // }\n    // if(this.state.addId){\n    //   console.log(document.getElementById(this.state.id).getBoundingClientRect());\n    // }\n  }\n  changeColumn=(start,end)=>{\n    // console.log(\"start\",start);\n    // console.log(\"end\",end);\n    //改变table的title顺序\n    //深克隆\n    let order=this.state.order;\n    if(this.state.checkbox){\n      start=start-1 > 0 ? start-1 : 0;\n      end=end-1 > 0 ? end-1 : 0;\n    }\n    let del=order.splice(start,1);\n    order.splice(end,0,del[0]);\n    this.setState({order:order});\n    this.props.table.changeTitleOrder(order);\n  }\n  componentWillUnmount=()=>{\n\n  }\n\n\n  //重写drag组件\n  eventPageX=(event)=>{\n    let pageX = event.pageX;\n    if (typeof pageX == 'undefined') {\n      let body = document.body;\n      let docElem = document.documentElement;\n      pageX = event.clientX + (docElem && docElem.scrollLeft || body && body.scrollLeft || 0) - (docElem && docElem.clientLeft || body && body.clientLeft || 0);\n    }\n    return pageX;\n  }\n  tridentDetection=()=>{\n    return (navigator.userAgent.indexOf(\"Trident\") != -1) ? true : false;\n  }\n  borderCollapseDetection=(table)=>{\n    return this.elementStyleProperty(table, 'border-collapse') == 'collapse' ? true : false;\n  }\n  getOffsetRect=(elem)=>{\n    // (1)\n    var box = elem.getBoundingClientRect();\n\n    var body = document.body;\n    var docElem = document.documentElement;\n\n    // (2)\n    var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\n    var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\n    // (3)\n    var clientTop = docElem.clientTop || body.clientTop || 0;\n    var clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n    // (4)\n    var top = box.top + scrollTop - clientTop;\n    var left = box.left + scrollLeft - clientLeft;\n\n    return { top: Math.round(top), left: Math.round(left) };\n  }\n  numericProperty=(prop)=>{\n    return (typeof prop == 'undefined' || prop == '' || prop == null) ? 0 : parseInt(prop);\n  }\n  eventTargetTh=(event)=>{\n    let e;\n    let type=Object.prototype.toString.call(event);\n    if(type===\"[object MouseEvent]\"||type===\"[object Object]\"){\n      e=event.target || event.srcElement;\n    }else{\n      e=event;\n    }\n    if(Object.prototype.toString.call(e)===\"[object HTMLTableCellElement]\"\n      ||Object.prototype.toString.call(e)===\"[object HTMLTableHeaderCellElement]\"){\n      //兼容性IE的table类型为[object HTMLTableHeaderCellElement]\n      return e;\n    }else{\n      return this.eventTargetTh(e.parentElement);\n    }\n  }\n  elementStyleProperty=(element, prop)=>{\n    if (window.getComputedStyle) {\n      return window.getComputedStyle(element, \"\").getPropertyValue(prop);\n    } else { // http://stackoverflow.com/questions/21797258/getcomputedstyle-like-javascript-function-for-ie8\n      var re = /(\\-([a-z]){1})/g;\n      if (prop == 'float') prop = 'styleFloat';\n      if (re.test(prop)) {\n        prop = prop.replace(re, function () {\n          return arguments[2].toUpperCase();\n        });\n      }\n      return element.currentStyle[prop]\n    }\n  }\n  copyStyles=(el)=> {\n    var cs = window.getComputedStyle ? window.getComputedStyle(el, null) : el.currentStyle,\n      css = '';\n    for (var i = 0; i < cs.length; i++) {\n      var style = cs[i];\n      css += style + ': ' + cs.getPropertyValue(style) + ';';\n    }\n    return css;\n  }\n  mousePrepareDrag=(event)=>{\n    var trident = this.tridentDetection(),\n      table = document.getElementById(this.state.id),\n      borderCollapse = this.borderCollapseDetection(table),\n      tablePosition = this.getOffsetRect(table),\n      row = table.rows[0],\n      rowPosition = this.getOffsetRect(row),\n      rowOffsetHeight = row.offsetHeight,\n      tableClientLeft = trident ? (rowPosition.left - tablePosition.left) : table.clientLeft,\n      tableClientTop = trident ? (rowPosition.top - tablePosition.top) : table.clientTop,\n      backLeft = borderCollapse ? tablePosition.left : (tablePosition.left + tableClientLeft),\n      backTop = borderCollapse ? tablePosition.top : (rowPosition.top),\n      backWidth = borderCollapse ? table.offsetWidth : table.offsetWidth - 2 * tableClientLeft,\n      backHeight = table.rows[0].offsetHeight,\n      zIndex = this.numericProperty(table.style.zIndex),\n      zIndex = zIndex ? zIndex + 1 : 1,\n      // initialColumn = eventTarget(event).cellIndex,\n      //由于table-drag的th里面不能包含其他元素，所以为了满足项目需求增加方法更改查找父元素为th,eventTargetTh--rain\n      initialColumn = this.eventTargetTh(event).cellIndex,\n      backgroundColor = this.elementStyleProperty(table, 'background-color');\n    //在table的setting，重置table的列数时，nc的数据有问题，所以进行重置\n    var  hr = table.rows[0];\n    var  nc = hr.cells.length;\n\n    // last column, initial column\n    lc = initialColumn;\n    ic = initialColumn;\n    startColumn=initialColumn;\n    endColumn=initialColumn;\n    // overlay - back\n    var back = document.createElement(\"div\");\n    back.style.position = 'absolute';\n    back.style.left = backLeft + 'px';\n    back.style.top = backTop + 'px';\n    back.style.width = backWidth + 'px';\n    // back.style.width = parentWidth;\n    back.style.height = backHeight + 'px';\n    back.style.backgroundColor = backgroundColor;\n    back.style.zIndex = zIndex;\n    back.className = \"csp-table-drag-container\";\n    //由于ant-table在列较多时，会滚动，会溢出ant-table标题区域,所以获取table父元素位置和大小，超出父元素位置，设置其opacity为0，视觉上看不见\n    var tableLeft=tablePosition.left;\n    var tableParent=table.parentElement;\n    var tableParentLeft=this.getOffsetRect(tableParent).left;\n    var tableParentWidth=parseInt(this.elementStyleProperty(tableParent,\"width\").slice(0,-2));\n    var tableLimitLeft=tableParentLeft-tableLeft;\n    var tableLimitRight=tableLimitLeft+tableParentWidth;\n    // console.log(\"tableParentLeft\",tableParentLeft);\n    // console.log(\"tableLeft\",tableLeft);\n    // console.log(\"tableLimitLeft\",tableLimitLeft);\n    // console.log(\"tableLimitRight\",tableLimitRight);\n    //添加整个拖拽元素移动界限\n    limitRight=backWidth;\n    limitLeft=0;\n    minColumn=0;\n    maxColumn=nc;\n    // overlay - front\n    for (var i = 0; i < nc; i++) {\n      // if (row.cells[i].getAttribute(\"class\") !== \"ant-table-selection-column\") {\n      var cell = row.cells[i],\n        cellPosition = this.getOffsetRect(cell),\n        offsetWidth = cell.offsetWidth,\n        offsetHeight = cell.offsetHeight,\n        clientWidth = cell.clientWidth,\n        clientHeight = cell.clientHeight,\n        clientLeft = cell.clientLeft,\n        clientTop = cell.clientTop,\n        clientRight = offsetWidth - clientWidth - clientLeft,\n        clientBottom = offsetHeight - clientHeight - clientTop,\n        paddingTop = this.numericProperty(this.elementStyleProperty(cell, 'padding-top')),\n        paddingBottom = this.numericProperty(this.elementStyleProperty(cell, 'padding-bottom')),\n        temp = cell.getBoundingClientRect(),\n        computedCellHeight = temp.bottom - temp.top - clientTop - clientBottom - paddingTop - paddingBottom,\n        borderLeftWidth = borderCollapse ? (clientRight + clientLeft) : clientLeft,\n        borderTopWidth = borderCollapse ? (clientTop + clientBottom) : clientTop,\n        borderRightWidth = borderCollapse ? (clientRight + clientLeft) : clientRight,\n        borderBottomWidth = borderCollapse ? (clientTop + clientBottom) : clientBottom,\n        elementBaseLeft = borderCollapse ? (cellPosition.left - backLeft - tableClientLeft) : cellPosition.left - backLeft,\n        elementBaseTop = borderCollapse ? (cellPosition.top - backTop - tableClientTop) : cellPosition.top - backTop,\n        elementBaseWidth = clientWidth + borderLeftWidth + borderRightWidth,\n        elementBaseHeight = rowOffsetHeight;\n\n      var element = document.createElement(\"div\");\n      element.style.cssText = this.copyStyles(cell);\n      element.style.position = 'absolute';\n      element.style.left = 0;\n      element.style.top = 0;\n      element.style.height = computedCellHeight+1 + 'px';//高度+1，拖拽时候比ant-table的标题少1px，没找到原因，可能因为子元素样式引起的问题\n      element.style.borderLeftWidth = borderLeftWidth + 'px';\n      element.style.borderTopWidth = borderTopWidth + 'px';\n      element.style.borderRightWidth = borderRightWidth + 'px';\n      element.style.borderBottomWidth = borderBottomWidth + 'px';\n      element.innerHTML = cell.innerHTML;\n      element.style.zIndex = zIndex + 3;\n      //当ant-table含有复选框时，给复选框添加单独class\n      if(row.cells[i].getAttribute(\"class\") === \"ant-table-selection-column\"){\n        element.className=\"csp-table-drag-input\";\n      }\n      if (i == initialColumn) element.style.left = elementBaseLeft + 'px';\n      if (i == initialColumn) element.style.top = elementBaseTop + 'px';\n\n      var elementBase = document.createElement(\"div\");\n      elementBase.style.position = 'absolute';\n      elementBase.style.left = elementBaseLeft + 'px';\n      elementBase.style.top = elementBaseTop+ 'px';\n      elementBase.style.height = elementBaseHeight + 'px';\n      elementBase.style.width = elementBaseWidth + 'px';\n      elementBase.style.backgroundColor = 'white';\n      elementBase.style.zIndex = zIndex + 2;\n      //当ant-table含有复选框时，给复选框容器添加data-checkbox，自定义属性区分，暂时没对这个属性进行应用\n      if(row.cells[i].getAttribute(\"class\") === \"ant-table-selection-column\"){\n        elementBase.setAttribute('data-checkbox','checkbox');\n      }\n      if (i == initialColumn) elementBase.style.zIndex = zIndex + 1;\n\n      // drag element\n      if (i == initialColumn) {\n        de = element ;\n        deLeft=elementBaseLeft;\n        deWidth=elementBaseWidth;\n      }\n      if (i != initialColumn) elementBase.appendChild(element);\n\n\n\n      //当元素位置超过ant-table的左右边界限制时，使元素的opacity为0，视觉上看不见\n      var elementBaseLimitRight=elementBaseLeft+elementBaseWidth;\n      if(!(elementBaseLeft>=tableLimitLeft&&elementBaseLimitRight<=tableLimitRight)){\n        // elementBase.style.opacity=0;\n        elementBase.setAttribute(\"class\",\"csp-opacity\");\n        if(i == initialColumn){\n          de.style.opacity=0;\n          return false;\n        }\n      }\n      //添加整个拖拽元素移动界限\n      if(!(elementBaseLeft>=tableLimitLeft)){\n        limitLeft=elementBaseLeft+elementBaseWidth;\n        minColumn=i+1;\n      }\n      if(!(elementBaseLimitRight<=tableLimitRight)){\n        limitRight=elementBaseLeft>limitRight?limitRight:elementBaseLeft;\n        maxColumn=i<maxColumn?i-1:maxColumn;\n      }\n      // console.log(\"elementBaseLeft\",elementBaseLeft);\n      // console.log(\"i\",i);\n      // console.log(\"tableLimitRight\",tableLimitRight);\n      // console.log(\"tableLimitLeft\",tableLimitLeft);\n      // console.log(\"elementBaseLeft\",elementBaseLeft);\n      // console.log(\"elementBaseLimitRight\",elementBaseLimitRight);\n      // console.log(\"limitLeft\",limitLeft);\n      // console.log(\"this.limitLeft\",this.limitLeft);\n      // console.log(\"limitRight\",limitRight);\n      // console.log(\"minColumn\",minColumn);\n      // console.log(\"maxColumn\",maxColumn);\n      // console.log(\"this.limitRight\",this.limitRight);\n      // console.log(\"elementBaseLimitRight\",elementBaseLimitRight);\n      back.appendChild(elementBase);\n      // console.log(\"elementBaseLeft\",elementBaseLeft);\n      // }\n    }\n    back.appendChild(de);\n    document.body.appendChild(back);\n    overlay = back;\n\n    // replace current document cursor\n    cur = document.body.style.cursor;\n    document.body.style.cursor = 'move';\n    return true;\n  }\n  getEvent=(event)=>{\n    return event || window.event;\n  }\n  eventWhich=(event)=> {\n    return event.which || event.button;\n  }\n  addEvent=(obj, type, fn)=> {\n    if (obj.attachEvent) {\n      obj['e' + type + fn] = fn;\n      obj[type + fn] = function () {\n        obj['e' + type + fn](window.event);\n      };\n      obj.attachEvent('on' + type, obj[type + fn]);\n    } else\n      obj.addEventListener(type, fn, false);\n  }\n  removeEvent=(obj, type, fn)=>{\n    if (obj.detachEvent) {\n      obj.detachEvent('on' + type, obj[type + fn]);\n      obj[type + fn] = null;\n    } else\n      obj.removeEventListener(type, fn, false);\n  }\n  getTableColumn=(table, pageX, defaultColumn)=> {\n    var cells = table.rows[0].cells;\n    for (var i = 0; i < cells.length; i++) {\n      var tx = this.getOffsetRect(cells[i]).left;\n      if (tx <= pageX && pageX <= tx + cells[i].offsetWidth) {\n        return i;\n      }\n    }\n\n    return (typeof defaultColumn == 'undefined' ? -1 : defaultColumn);\n  }\n  sign=(x)=> {\n    return typeof x == 'number' ? x ? x < 0 ? -1 : 1 : x === x ? 0 : NaN : NaN;\n  }\n  mouseMoveDelegate=(event)=>{\n    // console.log(\"this.eventPageX(event)\",this.eventPageX(event));\n    // console.log(\"mousePositionLeft\",mousePositionLeft);\n    var distance = this.eventPageX(event) - mousePositionLeft,\n      table = document.getElementById(this.state.id),\n      lastColumn = lc,\n      eventColumn = this.getTableColumn(table, this.eventPageX(event), lastColumn);//这个地方出问题\n    //console.log(\"lastColumn\",lastColumn);//当前移动的column的序号\n    //console.log(\"eventColumn\",eventColumn);//当前移动元素到哪个column的序号\n    eventColumn<minColumn?eventColumn=minColumn:eventColumn>maxColumn?eventColumn=maxColumn:eventColumn;\n    // if (positionLeft >= limitLeft && positionLeft <= (limitRight - eventWidth))\n    // this.tableMove=true;\n    //原代码\n    if((limitRight-deWidth)>=(deLeft + distance)&&(deLeft + distance)>=limitLeft){\n      de.style.left = deLeft + distance + 'px';\n    }else if((deLeft + distance)>(limitRight-deWidth)){\n      de.style.left = limitRight-deWidth + 'px';\n    }else if((deLeft + distance)<limitLeft){\n      de.style.left = limitLeft + 'px';\n    }\n    // console.log(\"deWidth\",deWidth);\n    // console.log(\"limitRight\",limitRight);\n    // console.log(\"limitLeft\",limitLeft);\n    // console.log(\"deLeft\",deLeft);\n    // console.log(\"distance\",distance);\n    // console.log(\"this.numericProperty(de.style.left)\",this.numericProperty(de.style.left));\n    if (eventColumn != lastColumn) { // bubble\n      var trident = this.tridentDetection(),\n        borderCollapse = this.borderCollapseDetection(table),\n        borderSpacing = borderCollapse ? 0 : this.numericProperty(this.elementStyleProperty(table, 'border-spacing')),\n        direction = this.sign(eventColumn - lastColumn);\n      for (var i = lastColumn; i != eventColumn; i += direction) {\n\n        var start = i,\n        end = start + direction,\n        shift = 0,\n          shift = (direction < 0 && start > ic) ? 1 : ((direction > 0 && start < ic) ? -1 : 0),\n          layerOne = overlay.childNodes[direction < 0 ? ic : (end + shift)],\n          layerTwo = overlay.childNodes[direction > 0 ? ic : (end + shift)],\n          borderLeftWidth = this.numericProperty(this.elementStyleProperty(direction < 0 ? layerTwo.childNodes[0] : de, 'border-left-width')),\n          borderLeftWidth = borderCollapse ? borderLeftWidth : 0,\n          left = this.numericProperty(layerTwo.style.left),\n          width = this.numericProperty(layerOne.style.width);\n        layerOne.style.left = left + 'px';\n        layerTwo.style.left = left + width + borderSpacing - borderLeftWidth + 'px';\n        //layerOne.setAttribute(\"class\",\"csp-move-column\")//可能没用\n        //layerOne 移动的空白站位\n        //layerTwo 其他已经移动位置元素\n        // console.log(\"layerOne\", layerOne);\n        // console.log(\"layerTwo\", layerTwo);\n\n\n\n\n\n        endColumn=end;\n        // console.log(\"startColumn\",startColumn);\n        // console.log(\"endColumn\",endColumn);\n        // set new column\n        lc = end;\n      }\n    }\n  }\n  mouseUpDelegate=(e)=>{\n    document.body.removeChild(overlay);\n    // console.log(\"overlay\",overlay);\n    this.changeColumn(startColumn, endColumn);\n    this.removeEvent(document, 'mousemove', this.mouseMoveDelegate);\n    document.body.style.cursor = cur;\n    this.removeEvent(document, 'mouseup', this.mouseUpDelegate);\n  }\n  titleMouseDown=(e)=>{\n    (e.preventDefault ? e.preventDefault() : (e.returnValue=false));\n    (e.stopPropagation ? e.stopPropagation() : (e.cancelBubble=true));\n    if(this.eventWhich(e)===0){\n      mousePositionLeft=this.eventPageX(e);\n      if(this.mousePrepareDrag(e)){\n        this.addEvent(document, 'mousemove', this.mouseMoveDelegate);\n        this.addEvent(document, 'mouseup', this.mouseUpDelegate);\n      }\n    }\n  }\n  //drag组件结束\n\n  getColumns=()=>{\n    //重新设置table的title顺序\n    let order=this.state.order;\n    let columns=this.props.table.columns;\n    let newColumn=[];\n    let that=this;\n    if(order.length!==0){\n      order.map(function(val){\n        for(let i=0;i<columns.length;i++){\n          if(val===columns[i].key){\n            let newVal={};\n            for(let key in columns[i]){\n              if(key===\"title\"){\n                newVal[key]=<p className=\"csp-table-title\" onMouseDown={that.titleMouseDown}>{columns[i][key]}</p>;\n                // newVal[key]=<p className=\"csp-table-title\">{columns[i][key]}</p>;\n              }else{\n                newVal[key]=columns[i][key];\n              }\n            }\n            newColumn.push(newVal);\n            return false;\n          }\n        }\n      });\n      return newColumn;\n    }else{\n      return columns;\n    }\n  }\n  searchClick=()=>{\n    //search按钮在点击时候设置下面search框显示或者隐藏\n    this.setState({searchShow:!this.state.searchShow,searchValue:\"\"});\n    if(this.state.searchValue!==\"\"){\n      let filter=this.state.filter;\n      filter=Object.assign({},filter,{[this.state.searchName]:\"\"})\n      this.triggerSearchFilter({[this.state.searchName]:\"\"});\n      this.props.buttonGroup.setFilterValues(filter);\n    }\n  }\n  // emptySearchValue=()=>{\n  //   //清空searchValue\n  //   this.setState({searchValue:\"\"});\n  //   this.triggerSearchFilter({[this.state.searchName]:\"\"});\n  // }\n  searchChange=(e)=>{\n    //search搜索框在onChange触发的事件\n    let filter=this.state.filter;\n    filter=Object.assign({},filter,{[this.state.searchName]:e.target.value})\n    this.setState({searchValue:e.target.value,filter:filter});\n    this.props.buttonGroup.setFilterValues(filter);\n    this.setState({hasSearch:false});\n    // this.triggerSearchFilter({[this.state.searchName]:e.target.value});\n  }\n  filterClick=()=>{\n    this.setState({filerModalShow:!this.state.filerModalShow});\n    if(this.state.filerModalShow){\n      let filter=this.initialFilter(this.state.order);\n      this.setState({filter:filter});\n      this.triggerSearchFilter(filter);\n      this.props.buttonGroup.setFilterValues(filter);\n    }\n  }\n  filterResetClick=()=>{\n    let filter=this.initialFilter(this.state.order);\n    if(this.props.buttonGroup.search&&this.state.searchShow){\n      this.setState({searchValue:\"\"});\n      filter=Object.assign({},filter,{[this.state.searchName]:\"\"})\n    }\n    this.setState({filter:filter});\n    this.triggerSearchFilter(filter);\n    this.props.buttonGroup.setFilterValues(filter);\n  }\n  setDateFilter=(name,value)=>{\n    this.setState({[name+\"FilterReal\"]:value});\n  }\n  // setRangeFilter=(name,value)=>{\n  //   //保存range类型筛选的值，满足都是数字的要求，点击对号放入filter过滤\n  //   this.setState({[name+\"FilterReal\"]:value});\n  // }\n  initialFilter=(order,option)=>{\n    //由于日期组件设置时间的值会与传给后台的值有出入，filter中为传给后台日期格式，再state设置dateFilterReal属性为date的值\n    //由于用户对于range类型筛选可能包含非数字，故保存range类型筛选的值在rangeFilter对象中，满足都是数字的要求，点击对号放入state的filter过滤\n    let filter={};\n    let that=this;\n    if(!option){\n      if(this.props.buttonGroup.filter){\n        this.props.tableFilter.filterOption.map(function(val,index){\n          switch(val.type){\n            case \"string\":\n              if(order.indexOf(val.property)!==-1){\n                filter=Object.assign({},filter,{[val.name]:true});\n              }else{\n                filter=Object.assign({},filter,{[val.name]:false});\n              }\n              break;\n            case \"enum\":\n              filter=Object.assign({},filter,{[val.name]:val.options[0].value});\n              break;\n            case \"date\":\n              that.setDateFilter(val.name,[null,null]);\n              filter=Object.assign({},filter,{[val.name]:[\"\",\"\"]});\n              break;\n            case \"range\":\n              // that.setRangeFilter(val.name,[\"\",\"\"]);\n              filter=Object.assign({},filter,{[val.name]:[\"\",\"\"]});\n              break;\n            case \"search\":\n              that.setState({searchName:val.name});\n              filter=Object.assign({},filter,{[val.name]:\"\"});\n              break;\n          }\n        });\n      }\n    }else{\n      if(this.props.buttonGroup.filter){\n        option.map(function(val,index){\n          switch(val.type){\n            case \"string\":\n              if(order.indexOf(val.property)!==-1){\n                filter=Object.assign({},filter,{[val.name]:true});\n              }else{\n                filter=Object.assign({},filter,{[val.name]:false});\n              }\n              break;\n            case \"enum\":\n              filter=Object.assign({},filter,{[val.name]:val.options[0].value});\n              break;\n            case \"date\":\n              that.setDateFilter(val.name,[null,null]);\n              filter=Object.assign({},filter,{[val.name]:[\"\",\"\"]});\n              break;\n            case \"range\":\n              // that.setRangeFilter(val.name,[\"\",\"\"]);\n              filter=Object.assign({},filter,{[val.name]:[\"\",\"\"]});\n              break;\n            case \"search\":\n              that.setState({searchName:val.name});\n              filter=Object.assign({},filter,{[val.name]:\"\"});\n              break;\n          }\n        });\n      }\n    }\n    return filter;\n  }\n  filterCheckbox=(name,e)=>{\n    // this.triggerSearchFilter({[name]:e.target.checked});\n    if(!e.target.checked){\n      let filterArray=this.props.tableFilter.filterOption;\n      let filter=this.state.filter;\n      let stringArray=[];\n      let reset=true;\n      filterArray.map(function(val){\n        if(val.type===\"string\"&&val.name!==name){\n          stringArray.push(val.name);\n        }\n      });\n      if(stringArray.length===0){\n        reset=true;\n      }\n      for(let i=0;i<stringArray.length;i++){\n        if(filter[stringArray[i]]){\n          reset=false;\n        }\n      }\n      if(reset){\n        let newFilter=Object.assign({},filter,{[this.state.searchName]:\"\"});\n        this.setState({searchValue:\"\"});\n        this.setState({filter:newFilter});\n      }\n    }\n    let filter=this.state.filter;\n    filter=Object.assign({},filter,{[name]:e.target.checked});\n    this.props.buttonGroup.setFilterValues(filter);\n    this.setState({filter:filter});\n    this.setState({hasSearch:false});\n  }\n  filterSelect=(name,e)=>{\n    let filter=this.state.filter;\n    filter=Object.assign({},filter,{[name]:e});\n    this.props.buttonGroup.setFilterValues(filter);\n    this.setState({filter:filter});\n    this.setState({hasSearch:false});\n    // this.triggerSearchFilter({[name]:e});\n  }\n  filterDateChange=(name,date, dateString)=>{\n    let filter=this.state.filter;\n    filter=Object.assign({},filter,{[name]:dateString});\n    this.props.buttonGroup.setFilterValues(filter);\n    this.setState({filter:filter});\n    this.setDateFilter(name,date);\n    this.setState({hasSearch:false});\n    // this.triggerSearchFilter({[name]:dateString});\n  }\n  // filterRangeConfirm=(name)=>{\n  //   let filter=this.state.filter;\n  //   filter=Object.assign({},filter,{[name]:JSON.parse(JSON.stringify(this.state[name+\"FilterReal\"]))});\n  //   this.setState({filter:filter});\n  //   this.triggerSearchFilter({[name]:JSON.parse(JSON.stringify(this.state[name+\"FilterReal\"]))});\n  // }\n  filterRangeInput=(name,e,index)=>{\n    let arr=this.state.filter[name];\n    let filter=this.state.filter;\n    if(this.isInteger(e.target.value)||e.target.value===\"\"){\n      arr[index]=e.target.value ? parseInt(e.target.value) : \"\";\n      filter=Object.assign({},filter,{[name]:arr});\n      this.setState({filter:filter});\n      this.props.buttonGroup.setFilterValues(filter);\n    }\n    this.setState({hasSearch:false});\n    // if(arr[0]===\"\"&&arr[1]===\"\"){\n    //   let filter=this.state.filter;\n    //   filter=Object.assign({},filter,{[name]:[\"\",\"\"]});\n    //   this.setState({filter:filter});\n    //   this.triggerSearchFilter({[name]:[\"\",\"\"]});\n    // }\n  }\n  // filterRangeAddClass=(name)=>{\n  //   let arr=this.state[name+\"FilterReal\"];\n  //   for(let i=0;i<arr.length;i++){\n  //     if(!this.isInteger(arr[i])){\n  //       return true;\n  //     }\n  //   }\n  //   return false;\n  // }\n  isInteger=(num)=>{\n    return /^[0-9]+$/.test(num);\n  }\n  queryFilter=()=>{\n    this.triggerSearchFilter({});\n  }\n  getFilterList=()=>{\n    let stringDom=[];\n    let enumDom=[];\n    let dateDom=[];\n    let rangeDom=[];\n    let order=this.state.order;\n    this.props.tableFilter.filterOption.map((val,index)=>{\n      switch(val.type){\n        case \"string\":\n          if(order.indexOf(val.property)!==-1){\n            stringDom.push(<Checkbox key={val.name} checked={this.state.filter[val.name]}\n                                     onChange={(e)=>{this.filterCheckbox(val.name,e)}}>{val.label}</Checkbox>);\n          }\n          break;\n        case \"enum\":\n          if(order.indexOf(val.property)!==-1){\n            enumDom.push(\n              <Select value={this.state.filter[val.name]} key={val.name} dropdownMatchSelectWidth={false}\n                      onChange={(select)=>{this.filterSelect(val.name,select)}}>\n                {val.options.map((option,i)=>{\n                  return <Select.Option key={option.value} value={option.value}>{val.label+\" : \"+option.label}</Select.Option>\n                })}\n              </Select>);\n          }\n          break;\n        case \"date\":\n          if(order.indexOf(val.property)!==-1){\n            dateDom.push(\n              <RangePicker key={val.name} onChange={(date, dateString)=>{this.filterDateChange(val.name,date, dateString)}}\n                           placeholder={val.placeholder} value={this.state[val.name+\"FilterReal\"]}/>);\n          }\n          break;\n        case \"range\":\n          if(order.indexOf(val.property)!==-1){\n            rangeDom.push(\n              <span key={val.name} className={\"csp-table-filter-range\"}>\n            <Button type=\"default\" disabled>{val.label}</Button>\n            <Input value={this.state.filter[val.name][0]} onChange={(e)=>{this.filterRangeInput(val.name,e,0)}}\n                   placeholder={this.props.tableFilter.rangePlaceholder[0]}/>\n            <Input placeholder=\"~\" disabled/>\n            <Input value={this.state.filter[val.name][1]}  onChange={(e)=>{this.filterRangeInput(val.name,e,1)}}\n                   placeholder={this.props.tableFilter.rangePlaceholder[1]}/>\n                {/*<Button disabled={this.filterRangeAddClass(val.name)} type=\"primary\" icon=\"check\" onClick={()=>this.filterRangeConfirm(val.name)}/>*/}\n          </span>\n            )\n          }\n          break;\n      }\n    });\n    return (\n      <div className=\"csp-table-filter-box\">\n        {\n          stringDom.length===0 ? null :\n            <div className=\"csp-table-filter-type\">\n              <div className=\"csp-table-filter-title\">{this.props.tableFilter.stringFilterTitle}&nbsp;:&nbsp;</div>\n              <div className=\"csp-table-filter-content\">\n                {stringDom}\n                {\n                  enumDom.length===0 ?\n                    <Button type=\"primary\" size=\"default\" onClick={this.queryFilter}>{this.props.buttonGroup.filterQuery}</Button> : null\n                }\n              </div>\n            </div>\n        }\n        {\n          enumDom.length===0 ? null :\n            <div className=\"csp-table-filter-type\">\n              <div className=\"csp-table-filter-title\">{this.props.tableFilter.typeFilterTitle}&nbsp;:&nbsp;</div>\n              <div className=\"csp-table-filter-content\">\n                {enumDom}\n                {dateDom.length===0?null:dateDom}\n                {rangeDom.length===0?null:rangeDom}\n                <Button type=\"primary\" size=\"default\" onClick={this.queryFilter}>{this.props.buttonGroup.filterQuery}</Button>\n              </div>\n            </div>\n        }\n        {\n          stringDom.length===0 && enumDom.length===0 ?\n            <div className=\"csp-table-filter-empty-content\">{this.props.buttonGroup.filterEmptyContent}</div>\n            : null\n        }\n      </div>\n    )\n  }\n  downloadClick=()=>{\n    let notDownloadColumns=this.props.buttonGroup.notDownloadColumns;\n    let data=this.props.table.dataSource;\n    let title=this.props.table.columns;\n    let order=this.state.order;\n    let result=[];\n    let subTitle=[];\n    for(let i=0;i<order.length;i++){\n      title.map(function(val,index){\n        if(order[i]===val.key){\n          if(notDownloadColumns.indexOf(order[i])===-1){\n            subTitle.push(val.title);\n          }\n          return false;\n        }\n      });\n    }\n    data.map(function(value,index){\n      let content=[];\n      for(let i=0;i<order.length;i++){\n        title.map(function(val,index){\n          if(order[i]===val.key){\n            if(notDownloadColumns.indexOf(order[i])===-1){\n              if(val.textContent){\n                //为了数字时间等正确显示及英文,和所包含的\\n\n                content.push(('\"'+val.textContent(value[order[i]],value)+'\"')+\"\\t\");\n              }else{\n                content.push(('\"'+value[order[i]]+'\"')+\"\\t\");\n              }\n            }\n\n            return false;\n          }\n        });\n      }\n      result.push(content);\n    });\n    result.unshift(subTitle);\n    let csvContent = \"data:text/csv;charset=utf-8,\\ufeff\";\n    if (window.navigator.msSaveOrOpenBlob) {\n      csvContent = \"\\ufeff\";\n    }\n    result.forEach(function(infoArray, index){\n      let dataString = infoArray.join(\",\");\n      csvContent += index < data.length ? dataString+ \"\\n\" : dataString;\n    });\n    if (window.navigator.msSaveOrOpenBlob) {\n        // if browser is IE\n      let blob = new Blob([decodeURIComponent(encodeURI(csvContent))],{\n        type: \"text/csv;charset=utf-8;\"\n      });\n      navigator.msSaveBlob(blob, this.props.buttonGroup.downloadFileName+'.csv');\n    }else{\n      let encodedUri = encodeURI(csvContent);\n      let link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", this.props.buttonGroup.downloadFileName+\".csv\");\n      document.body.appendChild(link);\n      link.click();\n      }\n  }\n  sortFilterValues=(filter)=>{\n    let filterArray=this.props.tableFilter.filterOption;\n    let range=[];\n    filterArray.map(function(val){\n      if(val.type===\"range\"){\n        range.push(val.name);\n      }\n    });\n    range.map(function(name){\n      filter=Object.assign({},filter,{[name]:filter[name][0]!==\"\"&&filter[name][1]!==\"\"?\n        filter[name][0]>filter[name][1]?[filter[name][1],filter[name][0]]\n          :filter[name]:filter[name]})\n    });\n    this.setState({filter:filter});\n    return filter;\n  }\n  triggerSearchFilter=(obj)=>{\n    let filter=this.filterValues(obj);\n    // if(this.props.buttonGroup.search){\n    //   filter=Object.assign({},filter,{[this.state.searchName]:this.state.searchValue});\n    // }\n    // if(this.props.buttonGroup.filter){\n    //   filter=Object.assign({},filter,this.state.filter);\n    // }\n    // filter=Object.assign({},filter,obj);\n    filter=this.sortFilterValues(filter);\n    // console.log(\"传递数据正确？？？\",filter);\n    this.props.buttonGroup.searchChange(filter);\n    this.setState({hasSearch:true});\n  }\n  filterValues=(obj)=>{\n    let filter={};\n    if(this.props.buttonGroup.filter){\n      filter=Object.assign({},filter,this.state.filter);\n    }\n    if(this.props.buttonGroup.search){\n      filter=Object.assign({},filter,{[this.state.searchName]:this.state.searchValue});\n    }\n    filter=Object.assign({},filter,obj);\n    return filter;\n  }\n  syncClick=()=>{\n    let filter=this.filterValues({});\n    filter=this.sortFilterValues(filter);\n    this.props.buttonGroup.syncClick(filter);\n  }\n  moreButtonClick=()=>{\n    let filter=this.filterValues({});\n    // if(this.props.buttonGroup.search){\n    //   filter=Object.assign({},filter,{[this.state.searchName]:this.state.searchValue});\n    // }\n    // if(this.props.buttonGroup.filter){\n    //   filter=Object.assign({},filter,this.state.filter);\n    // }\n    filter=this.sortFilterValues(filter);\n    this.props.moreButton.moreClick(filter,this.state.hasSearch);\n    this.setState({hasSearch:true});\n    this.setState({moreButtonStatus:true});\n    // console.log(\"more button传递数据正确？？？\",filter);\n  }\n  deleteClick=()=>{\n    let filter=this.filterValues({});\n    // if(this.props.buttonGroup.search){\n    //   filter=Object.assign({},filter,{[this.state.searchName]:this.state.searchValue});\n    // }\n    // if(this.props.buttonGroup.filter){\n    //   filter=Object.assign({},filter,this.state.filter);\n    // }\n    this.props.buttonGroup.deleteClick(filter);\n  }\n  settingClick=()=>{\n    this.changeSettingModal(true);\n  }\n  changeSettingModal=(bool)=>{\n    this.setState({setting:bool});\n  }\n  settingSave=(selectedItems)=>{\n    // console.log(\"selectedItems\",selectedItems);\n    let order=[];\n    selectedItems.map(function(val){\n      order.push(val.key);\n    });\n    this.setState({order:order});\n    this.settingResultFilter(order);\n    this.props.buttonGroup.settingSave(order);\n    // console.log(\"order\",order);\n    this.changeSettingModal(false);\n  }\n  settingResultFilter=(order)=>{\n    let filter=this.state.filter;\n    let filterOption=this.props.tableFilter.filterOption;\n    let that=this;\n    let string=[];\n    let empty=true;\n    if(this.props.buttonGroup.filter){\n      filterOption.map(function(val,index){\n        switch(val.type){\n          case \"string\":\n            if(order.indexOf(val.property)===-1){\n              filter=Object.assign({},filter,{[val.name]:false});\n            }\n            string.push(val.name);\n            break;\n          case \"enum\":\n            if(order.indexOf(val.property)===-1){\n              filter=Object.assign({},filter,{[val.name]:val.options[0].value});\n            }\n            break;\n          case \"date\":\n            if(order.indexOf(val.property)===-1){\n              that.setDateFilter(val.name,[null,null]);\n              filter=Object.assign({},filter,{[val.name]:[\"\",\"\"]});\n            }\n            break;\n          case \"range\":\n            if(order.indexOf(val.property)===-1){\n              filter=Object.assign({},filter,{[val.name]:[\"\",\"\"]});\n            }\n            // that.setRangeFilter(val.name,[\"\",\"\"]);\n            break;\n        }\n      });\n    }\n    if(this.props.buttonGroup.filter){\n      string.map(function(val){\n        if(filter[val]){\n          empty=false;\n          return false;\n        }\n      });\n    }\n    if(empty){\n      this.setState({searchValue:\"\"});\n      filter=Object.assign({},filter,{[this.state.searchName]:\"\"});\n    }\n    let newFilter=this.filterValues(filter);\n    newFilter=this.sortFilterValues(filter);\n    this.setState({filter:newFilter});\n    //需要重新发送搜索数据\n    this.props.buttonGroup.searchChange(newFilter);\n    this.props.buttonGroup.setFilterValues(newFilter);\n    this.setState({hasSearch:true});\n  }\n\n  getSelectedItems=()=>{\n    let selected=[];\n    let order=this.state.order;\n    let columns=this.props.table.columns;\n    order.map(function(val){\n      for(let i=0;i<columns.length;i++){\n        if(val===columns[i].key){\n          selected.push({key:val,title:columns[i].title});\n          return false;\n        }\n      }\n    });\n    return selected;\n  }\n  getInputStatus=()=>{\n    let filterArray=this.props.tableFilter.filterOption;\n    let filter=this.state.filter;\n    let stringArray=[];\n    filterArray.map(function(val){\n      if(val.type===\"string\"){\n        stringArray.push(val.name);\n      }\n    });\n    if(stringArray.length===0){\n      return true;\n    }\n    for(let i=0;i<stringArray.length;i++){\n      if(filter[stringArray[i]]){\n        return false;\n      }\n    }\n    return true;\n  }\n  getInputPlaceholder=()=>{\n    let placeholder=[];\n    let stringArray=[];\n    let filterArray=this.props.tableFilter.filterOption;\n    let filter=this.state.filter;\n    filterArray.map(function(val){\n      if(val.type===\"string\"){\n        stringArray.push(val);\n      }\n    });\n    for(let i=0;i<stringArray.length;i++){\n      if(filter[stringArray[i].name]){\n        placeholder.push(stringArray[i].label);\n      }\n    }\n    return placeholder.join(\"/\");\n  }\n  pageSizeChange=(value)=>{\n    let filter=this.filterValues({});\n    filter=this.sortFilterValues(filter);\n    this.setState({moreButtonStatus:true});\n    this.props.moreButton.pageSizeChange(value,filter,this.state.hasSearch);\n    this.setState({hasSearch:true});\n  }\n  render = () => {\n    let {moreButton,buttonGroup,tableFilter}=this.props;\n    let table=Object.assign({},this.props.table,{columns:this.getColumns()});\n    let moreShow=moreButton.show&&(table.dataSource.length < moreButton.total);\n    let dynamicButton=buttonGroup.dynamicButton?buttonGroup.dynamicButton:\"show\";\n    let dynamicButtonChildren=false;\n    //console.log(\"children\",this.props.children);\n    if(this.props.children){\n      if(Array.isArray(this.props.children)){\n        this.props.children.map(function(val){\n          if(val){\n            return dynamicButtonChildren=true;\n          }\n        });\n      }else{\n        dynamicButtonChildren=true;\n      }\n    }\n\n    // console.log(\"state\",this.state);\n    // console.log(\"filter\",this.state.filter);\n    // console.log(\"searchValue\",this.state.searchValue);\n    // console.log(\"order\",this.state.order);\n    // console.log(\"columns\",this.getColumns());\n\n    return (\n      <div className=\"csp-table-container\">\n        <div className=\"csp-table-dynamic-button\" style={{display:dynamicButton===\"show\"||dynamicButtonChildren?\"block\":\"none\"}}>\n          {\n            dynamicButton===\"show\" ?\n              <Button.Group>\n                <Button  size=\"large\" type=\"primary\" icon=\"plus\" disabled={!buttonGroup.add}\n                         onClick={this.props.buttonGroup.addClick} title={buttonGroup.addTitle}/>\n                <Button  size=\"large\" type=\"primary\" icon=\"delete\"\n                         disabled={!buttonGroup.delete||(this.props.table.rowSelection&&this.props.table.rowSelection.selectedRowKeys.length===0)}\n                         onClick={this.deleteClick} title={buttonGroup.deleteTitle}/>\n                <Button  size=\"large\" type=\"primary\" icon=\"edit\"\n                         disabled={!buttonGroup.edit||(this.props.table.rowSelection&&this.props.table.rowSelection.selectedRowKeys.length!==1)}\n                         onClick={this.props.buttonGroup.editClick} title={buttonGroup.editTitle}/>\n              </Button.Group> : null\n          }\n          {\n            dynamicButtonChildren ?\n              <div className=\"csp-table-dynamic-button-children\">\n                {\n                  this.props.children\n                }\n              </div> : null\n          }\n        </div>\n        <div className=\"csp-table-fixed-button\">\n          {//searchPlaceholder\n            buttonGroup.search&&this.state.searchShow ?\n              <Input.Search disabled={this.getInputStatus()} placeholder={this.getInputStatus()?buttonGroup.searchPlaceholder:this.getInputPlaceholder()}\n                     onChange={this.searchChange} onSearch={this.queryFilter} value={this.state.searchValue} size=\"large\"/>\n              : null}\n          <Button.Group>\n            <Button  size=\"large\" type=\"primary\" icon=\"search\" disabled={!buttonGroup.search}\n                     onClick={this.searchClick} title={buttonGroup.searchTitle}/>\n            <Button  size=\"large\" type=\"primary\" icon=\"filter\" disabled={!buttonGroup.filter}\n                     onClick={this.filterClick} title={buttonGroup.filterTitle}/>\n            <Button  size=\"large\" type=\"primary\" icon=\"reload\" disabled={!buttonGroup.filter&&!buttonGroup.search}\n                     onClick={this.filterResetClick} title={buttonGroup.resetTitle}/>\n            <Button  size=\"large\" type=\"primary\" icon=\"sync\" disabled={!buttonGroup.sync}\n                     onClick={this.syncClick} title={buttonGroup.syncTitle}/>\n            <Button  size=\"large\" type=\"primary\" icon=\"setting\" disabled={!buttonGroup.setting}\n                     onClick={this.settingClick} title={buttonGroup.settingTitle}/>\n            <Button  size=\"large\" type=\"primary\" icon=\"download\" disabled={!buttonGroup.download||this.props.table.dataSource.length===0}\n                     onClick={this.downloadClick} title={buttonGroup.downloadTitle}/>\n          </Button.Group>\n        </div>\n        {\n          buttonGroup.filter&&this.state.filerModalShow ?\n                this.getFilterList()\n            : null\n        }\n\n        <div className=\"csp-table-box\"  ref=\"tableContainer\">\n          <Table className=\"csp-table\" {...table} bordered/>\n        </div>\n        {\n          moreShow ?\n            <div className=\"csp-table-more\">\n              <Select value={moreButton.pageSize} onChange={this.pageSizeChange} disabled={this.state.moreButtonStatus}>\n                {\n                  moreButton.pageSizeList.map(function(val){\n                    return <Select.Option key={val} value={val}>{val+\"/\"+moreButton.pageSizeContent}</Select.Option>\n                  })\n                }\n              </Select>\n              <Button type=\"primary\" onClick={this.moreButtonClick} disabled={this.state.moreButtonStatus}>{moreButton.content}<Icon type=\"down\"/></Button>\n            </div> : null\n        }\n        {\n          buttonGroup.setting&&this.state.setting ? <ItemSelectModal okText={this.props.buttonGroup.settingOkText}\n                                                cancelText={this.props.buttonGroup.settingCancelText}\n                                                selectedItems={this.getSelectedItems()}\n                                                allItems={this.props.table.columns}\n                                                visible={this.state.setting}\n                                                title={this.props.buttonGroup.settingModalTitle}\n                                                itemSelectedContent={this.props.buttonGroup.settingItemSelectedContent}\n                                                placeholder={this.props.buttonGroup.settingPlaceholder}\n                                                hideModal={()=>this.changeSettingModal(false)}\n                                                onSave={this.settingSave}\n                                                addAllItemTitle={this.props.buttonGroup.settingAddAllItemTitle}\n                                                addSelectedItemTitle={this.props.buttonGroup.settingAddSelectedItemTitle}\n                                                removeAllItemTitle={this.props.buttonGroup.settingRemoveAllItemTitle}\n                                                removeSelectedItemTitle={this.props.buttonGroup.settingRemoveSelectedItemTitle}\n                                                savePrompt={this.props.buttonGroup.settingSavePrompt}\n                                                /> : null\n        }\n      </div>\n    );\n  }\n}\nTableDragComponent.defaultProps={\n  table:{\n    pagination:false,\n  },\n  moreButton:{\n    show:false,\n  },\n  buttonGroup:{\n    search:true,\n    add:true,\n  },\n}\nTableDragComponent.propTypes = {\n  /**\n   * id : string类型，必须，table的id ;<br/>\n   *columns : array类型，必须，同ant-table。为了在下载表格时，表格中内容可以与页面显示一致（为了兼容中英文及一些bool等判断可以正确显示为用户可读内容），\n   * 若columns中的render中包含一些dom元素或存在bool等需前端判断而显示不同文字，需增加textContent(text,record)，必须返回纯文本 ;<br/>\n   *order : array类型，必须，table的title顺序,在组件componentWillMount时请求后台获取该数据，当对table的标题进行增加或更改顺序，只需向后台发送数据，不需要重新请求更新 ;<br/>\n   *dataSource : 参考ant-table的dataSource ;<br/>\n   *changeTitleOrder : function类型，必须，改变table的title顺序后的回调函数，会传入新的order ;<br/>\n   * 注 :1. 若table含有列表可选功能时，rowSelection 要包含onChange和 selectedRowKeys;<br/>\n   * 其他 : 参考ant-table;<br/>\n   *\n   */\n  table:PropTypes.shape({\n    id:PropTypes.string.isRequired,//table的id，为了定位而使用\n    // rowSelection:PropTypes.object,\n    // scroll:PropTypes.object,\n    columns:PropTypes.array.isRequired,//下载按钮可用时，为了使传入的布尔值或者disable/enable等正确的输出中英文转换，\n    // 需增加一个方法textContent(text,record),返回纯文本，若包含这个方法，则使用这个方法返回的值，不包含直接使用DataSource对应key传入的值\n    // pagination:PropTypes.bool,\n    order:PropTypes.array.isRequired,//table的title顺序\n    dataSource:PropTypes.array.isRequired,\n    changeTitleOrder:PropTypes.func.isRequired,//改变title顺序后的回调函数，会传入新的order\n  }).isRequired,\n  /**\n  * show : bool类型，是否显示more按钮，必须;<br/>\n  * content : string类型，设置more按钮的显示文字，若show为true时，必须 ;<br/>\n  * moreClick : function类型，more按钮点击后的回调函数，会把当前搜索框及过滤器的值及hasSearch（bool值，为了解决用户在点击筛选条件后，未点击查询而直接点击下一页和页码的问题）传入，若show为true时，必须 ;<br/>\n  * pageSize : string类型，more按钮前设置初始请求数据的条数，由string类型的数据组成的数组（select组件的要求），若show为true时，必须 ;<br/>\n  * pageSizeChange : function类型，设置页数的回调，第一个参数为页数的value，第二个为filter的值，第三个值为hasSearch（bool值，为了解决用户在点击筛选条件后，未点击查询而直接点击下一页和页码的问题）若show为true时，必须 ;<br/>\n  * pageSizeContent : string类型，页数的显示内容，若show为true时，必须 ;<br/>\n  * pageSizeList : array类型，页数可选的数组，由string类型的数据组成的数组（select组件的要求），若show为true时，必须 ;<br/>\n  * total : number类型，总共数据的条数,当历史数据全部加载more按钮隐藏，若show为true时，必须 ;<br/>\n   **/\n  moreButton:PropTypes.shape({\n    show:PropTypes.bool.isRequired,//是否显示more按钮\n    content:PropTypes.string,//设置more按钮的内容\n    moreClick:PropTypes.func,//点击后的回调函数,会把当前搜索框及过滤器的值传入\n    pageSize:PropTypes.string,//设置初始请求数据的条数\n    pageSizeChange:PropTypes.func,//设置页数的回调\n    pageSizeContent:PropTypes.string,//文字内容\n    pageSizeList:PropTypes.array,//页数可选的数组\n    total:PropTypes.number,//总共数据的条数\n  }).isRequired,\n  /**\n  *search :  bool类型，搜索按钮是否可用，必须 ;<br/>\n  *searchTitle :  string类型，搜索按钮可用时，必须 ;<br/>\n  *searchChange : function类型，根据关键字搜索及根据过滤器结果进行搜索的回调函数,注意由于需要要求增加页数选择，故在页数更改时pageSize是存在外边容器的state内，故发送数据需注意对pageSize的处理,若search可用或filter为true时，必须 ;<br/>\n  *searchPlaceholder : string类型，搜索输入框无搜索包含（table用户未选择可筛选的标题或未选搜索包含）的placeholder文字,若search可用，必须 ;<br/>\n  *add :  bool类型，添加按钮是否可用 ;<br/>\n  *addTitle :  string类型，添加按钮可用时，必须 ;<br/>\n  *addClick : function类型，添加按钮点击的回调函数,若add可用,必须 ;<br/>\n  *filter : bool类型，过滤器按钮是否可用，必须  ;<br/>\n  *filterTitle : string类型，过滤器按钮可用时，必须  ;<br/>\n  *filterQuery : string类型，过滤器查询按钮的文字，过滤器按钮可用时，必须  ;<br/>\n  *filterEmptyContent : string类型，当用户没有可筛选内容时，显示的内容，过滤器按钮可用时，必须  ;<br/>\n  *setFilterValues : fun类型，为了把当前组件的过滤器内容传递到父容器中，会传入相关过滤筛选内容，当过滤器含有range类型，返回的值需要进行排序，过滤器按钮或搜索可用时，必须  ;<br/>\n  *resetTitle : string类型，过滤器按钮或搜索按钮可用时，必须  ;<br/>\n  *setting : bool类型，设置按钮是否可用，必须 ;<br/>\n  *settingTitle : string类型，设置按钮可用时，必须 ;<br/>\n  *settingAddAllItemTitle : string类型，setting模态框的全选的title，设置按钮可用时，必须 ;<br/>\n  *settingAddSelectedItemTitle : string类型，setting模态框的添加所选item的title，设置按钮可用时，必须 ;<br/>\n  *settingRemoveAllItemTitle : string类型，setting模态框的移除的title，设置按钮可用时，必须 ;<br/>\n  *settingRemoveSelectedItemTitle : string类型，setting模态框的移除所选item的title，设置按钮可用时，必须 ;<br/>\n  *settingModalTitle : string类型，setting模态框的标题，当setting为可用时，必须 ; <br/>\n  *settingPlaceholder : string类型，setting模态框内搜索框的placeholder，当setting为可用时，必须 ; <br/>\n  *settingItemSelectedContent : string类型，setting模态框已选item的显示文字，当setting为可用时，必须 ; <br/>\n  *settingSavePrompt : string类型，setting模态框未选择任何item给用户的提示信息，当setting为可用时，必须 ; <br/>\n  *settingOkText : string类型，setting模态框ok按钮显示的文字，当setting为可用时，必须 ; <br/>\n  *settingCancelText : string类型，setting模态框cancel按钮文字，当setting为可用时，必须 ; <br/>\n  *settingSave : function类型，setting模态框,保存后的回调函数，当setting为可用时，必须 ; <br/>\n  *sync : bool类型，刷新按钮是否可用，必须 ; <br/>\n  *syncTitle : string类型，刷新按钮可用时，必须 ; <br/>\n  *syncClick : function类型，sync按钮点击的回调函数，会传入当前搜索及根据过滤器结果，若sync可用，必须 ;<br/>\n  *download : bool类型，下载按钮是否可用，必须; <br/>\n  *downloadTitle :  string类型，下载按钮可用时，必须; <br/>\n  *notDownloadColumns : array类型，下载表格数据时，不包含的列，若全部列都需下载，则传入[]，对应的为columns数组中对应的key，下载按钮可用时，必须 ; <br/>\n  *downloadFileName : string类型，下载csv文件的，文件名，下载按钮可用时，必须 ; <br/>\n  *delete : bool类型，删除按钮是否可用，必须; <br/>\n  *deleteTitle : string类型，删除按钮可用时，必须; <br/>\n  *deleteClick : function类型，删除按钮点击的回调函数，会传入search的值及过滤器结果，当删除按钮可用时，必须; <br/>\n  *edit : bool类型，编辑按钮是否可用，必须; <br/>\n  *editTitle : string类型，编辑按钮可用时，必须; <br/>\n  *editClick : function类型，编辑按钮点击的回调函数，当编辑按钮可用时，必须; <br/>\n  *dynamicButton : string类型，添加、删除、修改按钮是否显示，不设置默认显示，不显示则值为hide(由于项目中添加删除修改按钮还可能根据权限表格数据中字段等设置状态，故添加一个属性判断); <br/>\n  * 注 : 若需要增加额外按钮，Button的size为large，会显示在与添加、删除、编辑按钮一行\n  **/\n  buttonGroup:PropTypes.shape({\n    search:PropTypes.bool.isRequired,//搜索按钮是否可用\n    searchTitle:PropTypes.string,//搜索按钮title\n    searchChange:PropTypes.func,//根据关键字搜索及根据过滤器结果进行搜索的回调函数\n    searchPlaceholder:PropTypes.string,//搜索输入框的placeholder文字\n    add:PropTypes.bool.isRequired,//添加按钮是否可用\n    addTitle:PropTypes.string,//添加按钮title\n    addClick:PropTypes.func,//添加按钮点击的回调函数\n    filter:PropTypes.bool.isRequired,//过滤器按钮是否可用\n    filterTitle:PropTypes.string,//过滤器按钮title\n    filterQuery:PropTypes.string,//过滤器查询按钮文字\n    filterEmptyContent:PropTypes.string,//没有可筛选时显示内容\n    setFilterValues:PropTypes.func,//为了把当前组件的过滤器内容传递到父容器中，会传入相关过滤筛选内容\n    resetTitle:PropTypes.string,//重置按钮title\n    setting:PropTypes.bool.isRequired,//设置按钮是否可用\n    settingTitle:PropTypes.string,//setting模态框的标题\n    settingPlaceholder:PropTypes.string,//setting模态框搜索框placeholder\n    settingItemSelectedContent:PropTypes.string,//setting模态框已选item显示内容\n    settingSavePrompt:PropTypes.string,//setting模态框未选择任何item给用户的提示信息\n    settingOkText:PropTypes.string,//设置页面ok按钮文字\n    settingCancelText:PropTypes.string,//设置页面cancel按钮文字\n    settingSave:PropTypes.func,//设置页面保存的回调函数\n    sync:PropTypes.bool.isRequired,//刷新按钮是否可用\n    syncTitle:PropTypes.string,//刷新按钮title\n    syncClick:PropTypes.func,//刷新按钮点击的回调函数\n    download:PropTypes.bool.isRequired,//下载按钮是否可用\n    notDownloadColumns:PropTypes.array,//下载时不包含的列\n    downloadFileName:PropTypes.string,//下载文件的名称\n    delete:PropTypes.bool.isRequired,//删除按钮是否可用\n    deleteClick:PropTypes.func,//删除按钮点击的回调函数\n    edit:PropTypes.bool.isRequired,//编辑按钮是否可用\n    editClick:PropTypes.func,//编辑按钮点击的回调函数\n    dynamicButton:PropTypes.string,//添加、删除、修改按钮是否显示，不设置默认显示，不显示则值为hide，\n  }).isRequired,\n  /**\n   * filterOption : array类型，过滤器内所显示的过滤条件,支持4种类型string、enum、date、range，结构如下：<br/>\n   *[<br/>\n   *&nbsp;{type:\"search\",name:\"search111\"},//若搜索框可用，必须传递，目的是与后台search关键字对应 <br/>\n   *&nbsp;{type:\"string\",name:\"name\",property:\"name\",label:\"名称\"},//property为了便于后期联合查询及过滤器的显示内容<br/>\n   *&nbsp;{type:\"enum\",name:\"status\",property:\"status\",label:\"状态\",options:[{label:\"全部\",value:\"all\"},{label:\"在线\",value:\"online\"},{label:\"离线\",value:\"offline\"}]},\n   * //注意option顺序，默认option的第一个为选择状态，即与你componentWillMount时向后台发送对应数据对应，property为了便于后期联合查询及过滤器的显示内容<br/>\n   *&nbsp;{type:\"date\",name:\"time\",property:\"etime\"placeholder:[\"开始时间\",\"结束时间\"]},//property为了便于后期联合查询及过滤器的显示内容<br/>\n   *&nbsp;{type:\"range\",name:\"client\",property:\"client\",label:\"终端数量\"},//property为了便于后期联合查询及过滤器的显示内容<br/>\n   *];<br/>\n   *rangePlaceholder : array类型，当过滤器内容包含range类型时，为必须，指range类型最小值和最大值的placeholder，注意顺序，第一个为最小值，第二个为最大值;<br/>\n   *stringFilterTitle : string类型，当过滤器内容包含string类型时，为必须，指string类型前面的title内容;<br/>\n   *typeFilterTitle : string类型，当过滤器内容包含enum、date、range类型时，为必须，指enum、date、range类型前面的title内容;<br/>\n   *注 : 过滤器string类型，返回的为bool值，enum类型返回你传入option对应的value，date类型返回的是一个数组，若未选择区域返回[\"\",\"\"] ，\n   *range类型返回一个数组，顺序未按照大小顺序排序，若未选择区域返回[\"\",\"\"] ;<br/>\n   **/\n  tableFilter:PropTypes.shape({\n    filterOption:PropTypes.array.isRequired,\n    rangePlaceholder:PropTypes.array,\n    stringFilterTitle:PropTypes.string,\n    typeFilterTitle:PropTypes.string,\n  }),\n};\n\nexport default TableDragComponent;\n"]}